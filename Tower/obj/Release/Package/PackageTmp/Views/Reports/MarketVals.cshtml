@model IEnumerable<Tower.ViewModels.CalcViewModel>
@helper ShowIfNotNull(string header)
{
    if (!string.IsNullOrEmpty(header))
    {
        <h4> Issue Date: @header</h4>
    }
}
@{
    ViewBag.Title = "Market Values";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h2>Market Value Report</h2>
@using (Html.BeginForm("MarketVals", "Reports"))
{
    <p>
        @Html.ActionLink("New Report", "index", "Reports")
    </p>
    <h4>@ViewBag.MyTitle</h4>
    @*County:@Model.FirstOrDefault().county  --- Action: @Model.FirstOrDefault().action --- @Model.FirstOrDefault().qparam1 = @Model.FirstOrDefault().p1where --- @Model.FirstOrDefault().qparam2 = @Model.FirstOrDefault().p2where </h4>*@
    @*@ShowIfNotNull(Model.FirstOrDefault().pissdt)*@
    @*@Html.HiddenFor(model => model.FirstOrDefault().qparam1)
    @Html.HiddenFor(model => model.FirstOrDefault().qparam2)
    @Html.HiddenFor(model => model.FirstOrDefault().pissdt)
    @Html.HiddenFor(model => model.FirstOrDefault().county)
    @Html.HiddenFor(model => model.FirstOrDefault().action)
        @Html.HiddenFor(model => model.FirstOrDefault().p1where)
    @Html.HiddenFor(model => model.FirstOrDefault().p2where)*@

   
    <input type="hidden" id="sFace_Value" name="sFace_Value" value="@Model.FirstOrDefault().sFace_Value">
   
    <table class="table">
        <tr>
           

            <th>
                <input type="submit" value="Market Value" name="Command" class="btn-primary" />
           
            </th>

            <th>

                <input type="submit" value="Face Value" name="Command" class="btn-primary" />
            </th>
            <th>
                <input type="submit" value="Month 6" name="Command" class="btn-primary" />
            </th>
            <th>
                <input type="submit" value="Month 12" name="Command" class="btn-primary" />
            </th>
            <th>
                <input type="submit" value="Month 23" name="Command" class="btn-primary" />
            </th>
            <th>
                <input type="submit" value="Month 30" name="Command" class="btn-primary" />
            </th>
            <th>
                <input type="submit" value="Month 36" name="Command" class="btn-primary" />
            </th>
            <th>
                <input type="submit" value="Today" name="Command" class="btn-primary" />
            </th>
            <th>
                @*<a href="@Url.Action("DownLoaddt", "Reports", new { P3 = @Model.FirstOrDefault().county, P4 = @Model.FirstOrDefault().paction, P5 = @Model.FirstOrDefault().pissdt, W1 = @Model.FirstOrDefault().qparam1, V1 = @Model.FirstOrDefault().p1where,W2 = @Model.FirstOrDefault().qparam2, V2 = @Model.FirstOrDefault().p2where })">Download Data</a>*@
                <a href="@Url.Action("DownLoaddt", "Reports", new { ID = 1})">Download Data</a>
            </th>
            <th></th>
        </tr>

        @foreach (var item in Model)
        {
            <tr>
               <td><a href="@Url.Action("DrillDown", "Reports", new { ID = item.ID})">@Html.DisplayFor(modelItem => item.pchoice)</a>
                    @*@Html.ActionLink(@Html.DisplayFor(modelItem => item.pchoice).ToString(), "DrillDown",
    new RouteValueDictionary(new Dictionary<string, object>
    {
        { "col2", Model.FirstOrDefault().qparam2 },
        { "col1",  Model.FirstOrDefault().qparam1 },
        { "W1",   @Model.FirstOrDefault().p1where  },
        { "W2",   @Model.FirstOrDefault().p2where  },
        { "county",   @Model.FirstOrDefault().county  },
        { "paction",   @Model.FirstOrDefault().paction  },
        { "P5", Model.FirstOrDefault().pissdt },
        { "mchoice",   item.pchoice  },
    })
)*@
                </td>

                <td>
                    @Html.DisplayFor(modelItem => item.Face_Value)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.Month_6)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.Month_12)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.Month_23)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.Month_30)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.Month_36)

                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.Today)
                </td>
                <td>
                    <a href="@Url.Action("DownLoaddt", "Reports", new { ID = item.ID })">Download Data</a>
                    @*<a href="@Url.Action("DownLoaddt", "Reports", new { P3 = @Model.FirstOrDefault().county, P4 = @Model.FirstOrDefault().paction, P5 = @Model.FirstOrDefault().pissdt, W1 = @Model.FirstOrDefault().qparam1, V1 = @Model.FirstOrDefault().p1where,W2 = @Model.FirstOrDefault().qparam2, V2 = @Model.FirstOrDefault().p2where, JV1 = @item.pchoice })">Download Data</a>*@
                </td>

            </tr>
        }

    </table>
}

